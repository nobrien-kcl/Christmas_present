<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Christmas Present</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />

<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: #eee;
  margin: 0;
  padding: 20px;
}

h1 { text-align: center; }

.games {
  display: grid;
  grid-template-columns: repeat(2, minmax(320px, 1fr));
  gap: 30px;
}

@media (max-width: 800px) {
  .games { grid-template-columns: 1fr; }
}

.game { max-width: 360px; margin: auto; }

.row { display: flex; justify-content: center; margin: 4px 0; }

.tile {
  width: 44px;
  height: 44px;
  border: 2px solid #333;
  margin: 2px;
  font-size: 28px;
  display: flex;
  justify-content: center;
  align-items: center;
  font-weight: bold;
  text-transform: uppercase;
}

.correct { background:#6aaa64; border-color:#6aaa64; }
.present { background:#c9b458; border-color:#c9b458; }
.absent  { background:#3a3a3c; border-color:#3a3a3c; }

.hidden {
  opacity: 0;
  pointer-events: none;
  transform: translateY(20px);
}

.game:not(.hidden) {
  opacity: 1;
  transform: translateY(0);
  transition: all 0.5s ease;
}

input, button {
  width: 100%;
  font-size: 18px;
  padding: 8px;
  margin-top: 6px;
}

.keyboard {
  margin: 20px auto 40px auto;
  max-width: 520px;
  padding: 10px;
  border-top: 2px solid #333;
}

.krow {
  display: flex;
  justify-content: center;
  margin-bottom: 6px;
}

.key {
  background: #555;
  color: #fff;
  padding: 10px;
  margin: 2px;
  min-width: 32px;
  text-align: center;
  border-radius: 4px;
  font-weight: bold;
}

.key.correct { background:#6aaa64; }
.key.present { background:#c9b458; }
.key.absent  { background:#3a3a3c; }

#reveal {
  display: none;
  text-align: center;
  font-size: 22px;
  margin-top: 30px;
}
</style>
</head>

<body>
<h1>Christmas Present Puzzle ðŸŽ„</h1>

<div class="games">
  <div id="game1" class="game">
    <h2>Puzzle 1 (7)</h2>
    <div id="grid1"></div><div id="msg1"></div>
    <input id="guess1" maxlength="7">
    <button onclick="submitGuess(1)">Guess</button>
  </div>

  <div id="game2" class="game hidden">
    <h2>Puzzle 2 (6)</h2>
    <div id="grid2"></div><div id="msg2"></div>
    <input id="guess2" maxlength="6">
    <button onclick="submitGuess(2)">Guess</button>
  </div>

  <div id="game3" class="game hidden">
    <h2>Puzzle 3 (4)</h2>
    <div id="grid3"></div><div id="msg3"></div>
    <input id="guess3" maxlength="4">
    <button onclick="submitGuess(3)">Guess</button>
  </div>

  <div id="game4" class="game hidden">
    <h2>Puzzle 4 (6)</h2>
    <div id="grid4"></div><div id="msg4"></div>
    <input id="guess4" maxlength="6">
    <button onclick="submitGuess(4)">Guess</button>
  </div>
</div>

<!-- KEYBOARD -->
<h2 style="text-align:center; margin-top:40px;">Keyboard</h2>
<div class="keyboard" id="keyboard"></div>

<div id="reveal">
ðŸŽ‰ <strong>SNOW PATROL</strong> at <strong>CRYSTAL PALACE PARK</strong> â€” July 6th 2026! ðŸŽ¶
</div>

<script>
const ANSWERS = {
  1:"crystal",
  2:"palace",
  3:"snow",
  4:"patrol"
};
const MAX_GUESSES = 8;

let state = {1:{tries:0},2:{tries:0},3:{tries:0},4:{tries:0}};
let keyState = {};

const rows = ["qwertyuiop","asdfghjkl","zxcvbnm"];

function buildKeyboard() {
  const kb = document.getElementById("keyboard");
  kb.innerHTML = "";
  rows.forEach(r=>{
    const row=document.createElement("div");
    row.className="krow";
    [...r].forEach(l=>{
      const k=document.createElement("div");
      k.className="key";
      k.id="key-"+l;
      k.textContent=l.toUpperCase();
      row.appendChild(k);
    });
    kb.appendChild(row);
  });
}
buildKeyboard();

function resetKeyboard(){
  keyState={};
  document.querySelectorAll(".key").forEach(k=>{
    k.classList.remove("correct","present","absent");
  });
}

function createGrid(n,len){
  const g=document.getElementById("grid"+n);
  for(let r=0;r<MAX_GUESSES;r++){
    const row=document.createElement("div");
    row.className="row";
    for(let c=0;c<len;c++){
      const t=document.createElement("div");
      t.className="tile";
      t.id=`t-${n}-${r}-${c}`;
      row.appendChild(t);
    }
    g.appendChild(row);
  }
}
createGrid(1,7); createGrid(2,6); createGrid(3,4); createGrid(4,6);

function submitGuess(n){
  const g=document.getElementById("guess"+n);
  const msg=document.getElementById("msg"+n);
  const guess=g.value.toLowerCase();
  g.value="";

  if(!/^[a-z]+$/.test(guess) || guess.length!==ANSWERS[n].length){
    msg.textContent="Invalid word"; return;
  }

  const ans=ANSWERS[n];
  let freq={}; [...ans].forEach(c=>freq[c]=(freq[c]||0)+1);
  let res=Array(guess.length).fill("absent");

  for(let i=0;i<guess.length;i++){
    if(guess[i]===ans[i]){
      res[i]="correct"; freq[guess[i]]--;
    }
  }
  for(let i=0;i<guess.length;i++){
    if(res[i]==="correct")continue;
    if(freq[guess[i]]>0){
      res[i]="present"; freq[guess[i]]--;
    }
  }

  const row=state[n].tries;
  res.forEach((r,i)=>{
    const t=document.getElementById(`t-${n}-${row}-${i}`);
    t.textContent=guess[i];
    t.classList.add(r);

    const k=document.getElementById("key-"+guess[i]);
    if(!keyState[guess[i]] || r==="correct"){
      keyState[guess[i]]=r;
      k.className="key "+r;
    }
  });

  if(guess===ans){
    msg.textContent="Correct!";
    resetKeyboard();
    if(n<4){
      document.getElementById("game"+(n+1)).classList.remove("hidden");
    } else {
      document.getElementById("reveal").style.display="block";
    }
  } else {
    msg.textContent=(MAX_GUESSES-row-1)+" guesses left";
  }

  state[n].tries++;
}
</script>
</body>
</html>
